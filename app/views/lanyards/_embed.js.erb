<% if !params[:v].nil? %>


// creates var sw_3 and fills it with content from lanyard/lanyards, also escapse javascript
var sw_<%= params[:v] %> = "<%= escape_javascript(render :partial => "lanyards/full_lanyard", :locals => {:v => params[:v]}) %>"; 

// tells dom to replace all content with div class sw_3 with above html 
force = document.getElementById('sw_<%= params[:v] %>').innerHTML=sw_<%= params[:v] %>;
// tells dom to set div named sw_3 to visible
blue = document.getElementById('sw_<%= params[:v] %>').style.visibility = 'visible';

// this creates rules for include(file-name) 
function include(file)
{
// this creates var script element + <script> tage
    var script  = document.createElement('script');
// this sets src as file listed by include file
    script.src  = file;
    script.type = 'text/javascript';
// below line defers running code .script until javascript is ready    
		script.defer = true;
// this line runs everything contained within afer script.onload 
    script.onload = function(){$(document).ready(function() { 
      // gets window popup plugin 1. sets window settings, 2. links class name, 3. setunload callback
			$.getScript('http://localhost:3000/javascripts/jquery.popupwindow.js', function() 
			{
				var profiles = {window800:{height:400,width:400,center:1,status:1,onUnload:unloadcallback}};
				$(function(){$(".toggle-window").popupwindow(profiles);});
				function unloadcallback(){
					alert("Time to check if your loggedin or not, if so, change dom, if not don't");
					};
			});

			//  toggle profile lightbox  
			$('.toggle-button').click(function() {
				$('.sw_lanyard_wrapper').toggle('fast');
				return false;
			}); 
			
			
			
    })}
    document.getElementsByTagName('head').item(0).appendChild(script);
}
//add jQuery
include('http://code.jquery.com/jquery-1.5.js');
  



<% else %>
<% end %>
                          
       